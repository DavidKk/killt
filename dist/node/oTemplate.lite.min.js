// oTemplate.lite.min.js#1.0.0-beta - 2015-09-17 22:52:18
~function(a){"use strict";function b(a){return"Undefined"===a?function(a){return"undefined"==typeof a}:"Defined"===a?function(a){return"undefined"!=typeof a}:"Integer"===a?function(a){var b=parseInt(a,10);return!isNaN(b)&&a===b&&a.toString()===b.toString()}:"PlainObject"===a?function(a){var c,d;return!1===b("Object")(a)||b("Undefined")(a)?!1:(c=a.constructor,"function"!=typeof c?!1:(d=c.prototype,!1===b("Object")(d)?!1:!1===d.hasOwnProperty("isPrototypeOf")?!1:!0))}:function(b){return"[object "+a+"]"===Object.prototype.toString.call(b)}}function c(a){return a.replace(/^\s+|\s+$/,"")}function d(a){return b("String")(a)?a:b("Number")(a)?a+="":b("Function")(a)?d(a.call(a)):""}function e(a){return a.replace(/("|'|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function f(a){return d(a).replace(/&(?![\w#]+;)|[<>"']/g,f.escapeFn)}function g(a,c){if(b("Function")(c)){var d;if(b("Array")(a))if(Array.prototype.some)a.some(c);else{var e=a.length;for(d=0;e>d&&!0!==c(a[d],d);d++);}else if(b("Object")(a))for(d in a)if(!0===c(a[d],d))break}}function h(a){for(var b={},c=[],d=a.length;d--;)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function i(a,c){var d=b("Array")(a),e=d?[]:{};return g(a,function(a,b){c(a,b)&&(e[d?e.length:b]=a)}),e}function j(a,c){if(arguments.length>2){a=j(a,c);var d=Array.prototype.slice.call(arguments,2,arguments.length);return j(a,d[0])}if(b("Array")(a)&&b("Array")(c))Array.prototype.splice.apply(a,[a.length,0].concat(c));else if(b("PlainObject")(a)&&b("PlainObject")(c))for(var e in c)a[e]=c[e];return a}function k(a,c){function d(a){setTimeout(function(){throw a})}var e="";return b("Object")(a)?g(a,function(a,b){e+="<"+b.substr(0,1).toUpperCase()+b.substr(1)+">\n"+a+"\n\n"}):b("String")(a)&&(e=a),~(c===n.ENV.PRODUCE||c===n.ENV.DEVELOP)&&b("Defined")(console)&&b("Function")(console.error)?console.error(e):d(e),e}function l(){return""}function m(a,b,c){"function"==typeof define?define(function(){return b(c)}):"object"==typeof exports?module.exports=b(c):c[a]=b(c)}var n=function(a){a=a||{};var c=this;this._caches={},this._blocks={},this._blockHelpers={},this._sourceHelpers={},this._helpers={},this._defaults={},~j(this._defaults,n._defaults,a),~j(this._helpers,{$escape:function(){return f.apply(f,arguments)},$noescape:function(a){return d(a||"")},$toString:function(a,e){var f=c._defaults,a=d(a);return!0===(b("Boolean")(e)?e:f.escape)?c.helper("$escape")(a):a},include:function(a,b,d){var e=c._defaults,f=document.getElementById(a);return f?(k({message:"[Include Error]: Template ID `"+a+"` is not found."},e.env),""):c.render(f.innerHTML,b,d)}}),~b("Array")(n._extends)&&g(n._extends,function(a){c["extends"](a)})};n.ENV=n.prototype.ENV={PRODUCE:1,DEVELOP:2,UNIT:3},n._defaults={env:n.ENV.PRODUCE,noSyntax:!1,strict:!0,compress:!0,escape:!0,openTag:"{{",closeTag:"}}",depends:[]},n._extends=[],n.extend=function(a){return b("Function")(a)&&n._extends.push(a),this},n.prototype.$$throw=function(a){n.ENV.UNIT!==this._defaults.env&&k(a)},n.prototype.$$cache=function(a,b){var c=this._caches;return arguments.length>1?(c[a]=b,this):c[a]},n.prototype.$$table=function(){function a(a,b,c){c=c||" ",a=a.toString(),b=b.toString().replace(/\d/g,c);var d=b.split("");return d.splice(-a.length,a.length,a),d.join("")}return function(b){var c=0,d=b.match(/([^\n]*)?\n|([^\n]+)$/g);if(!d)return c+" | "+b;var e=d.length;return b.replace(/([^\n]*)?\n|([^\n]+)$/g,function(b){return a(++c,e)+" | "+b})}}(),n.prototype.$compileShell=function(){function d(a){var b=["$scope","$helpers","$blocks","$data","$buffer","$runtime","$append","abstract","arguments","break","boolean","byte","case","catch","char","class","continue","console","const","debugger","default","delete","do","double","else","enum","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","undefined","var","void","volatile","while","with","yield"],c=a.replace(/\\?\"([^\"])*\\?\"|\\?\'([^\'])*\\?\'|\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|\s*\.\s*[$\w\.]+/g,"").replace(/[^\w$]+/g,",").replace(/^\d[^,]*|,\d[^,]*|^,+|,+$/g,"").split(/^$|,+/);return i(c,function(a){return-1===b.indexOf(a)})}return function(f,i){i=i||{};var j=f,k=this._defaults,l=b("Boolean")(i.escape)?i.escape:k.escape,m=b("Boolean")(i.compress)?i.compress:k.compress,n=this._helpers,o=this._blockHelpers,p=this._sourceHelpers,q=[],r=[],s=[],t=1,u="",v=function(a){for(var b,c,d;c=/<%source\\s*([\w\W]+?)?\\s*%>(.+?)<%\/source%>/gim.exec(a);)b=c[1],d=c[2],d=b&&p.hasOwnProperty(b)?p[b](d):d,d='<%=unescape("'+escape(d)+'");%>',a=a.replace(c[0],d);return a},w=function(a){return a=a.replace(/<!--[\w\W]*?-->/g,"").replace(/^ +$/,""),""===a?"":(t+=a.split(/\n/).length-1,a=a.replace(/(["'\\])/g,"\\$1"),a=!0===m?a.replace(/[\r\t\n]/g,"").replace(/ +/g," "):a.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),'$buffer+="'+a+'";')},x=function(e){return e=c(e||""),g(d(e),function(c){if(c){var d=a[c];if(!b("Function")(d)||!d.toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return b("Function")(n[c])?void q.push(c):b("Function")(o[c])?void r.push(c):void s.push(c)}}),/^=\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$toString("+e.replace(/[=\s;]/g,"")+", "+l+");":/^#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$noescape("+e.replace(/[#\s;]/g,"")+");":/^!#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$escape("+e.replace(/[!#\s;]/g,"")+");":/^\s*([\w\W]+)\s*\([^\)]*?\)\s*$/.exec(e)&&(e="$buffer+=$helpers.$toString("+e+", "+l+");"),t+=e.split(/\n|%0A/).length-1,e+=(/\)$/.exec(e)?";":"")+"$runtime="+t+";"};return f=b("String")(f)?v(f):"",g(f.split("<%"),function(a){a=a.split("%>");var b=a[0],c=a[1];1===a.length?u+=w(b):(u+=x(b),u+=w(c))}),g(h(s),function(a){u="var "+a+"=$data."+a+";"+u}),g(h(q),function(a){u="var "+a+"=$helpers."+a+";"+u}),g(h(r),function(a){u="var "+a+"=$blocks."+a+";"+u}),u='try {"use strict";var $scope=this,$helpers=$scope.$helpers,$blocks=$scope.$blocks,$buffer="",$runtime=0;'+u+'return $buffer;}catch(err) {throw {Message: err.message,Line: $runtime,Shell: "'+e(this.$$table(j))+'"};}function $append(buffer) {$buffer += buffer;}'}}(),n.prototype.$compile=function(){return function(a,b){function c(b){var c;try{c=new Function(i,n)}catch(f){k({message:"[Compile Render]: "+f.message,line:"Javascript syntax occur error, it can not find out the error line.",syntax:e,template:a,shell:n}),c=l}return function(a){try{return c.apply(b,[a].concat(m))}catch(e){e=j({},e,{source:d.$$table(b.$source)}),k({message:"[Exec Render]: "+e.message,line:e.line,template:e.source,shell:e.shell})}}}var d=this,e=a,f=j({},this._defaults,b),h=f.depends,i=["$data"].concat(h).join(","),m=[];~g(h,function(a){"$"===a.charAt(0)?(a=a.replace("$",""),m.push(f[a])):m.push(void 0)}),!0!==f.noSyntax&&(a=this.$compileSyntax(a,!!f.strict));var n=this.$compileShell(a,f);return c({$source:a||"",$helpers:this._helpers||{},$blocks:this._blockHelpers||{}})}}(),n.prototype.OTemplate=function(a){return new n(a)},n.prototype["extends"]=function(a){return a.call(this,this),this},n.prototype.config=function(a,c){if(1<arguments.length&&b("String")(a))return"openTag"===a&&"<%"===a||"closeTag"===a&&"%>"===a?this:(this._defaults[a]=c,this);var d=this;return b("PlainObject")(a)?(g(options,function(a,b){d.config(a,b)}),this):b("String")(a)?this._defaults[a]:void 0},n.prototype.helper=function(a,c){if(1<arguments.length)b("String")(a)&&b("Function")(c)&&(this._helpers[a]=c);else{if(b("String")(a))return this._helpers[a];if(b("PlainObject")(a)){var d;for(d in a)this.helper(d,a[d])}}return this},n.prototype.unhelper=function(a){var b=this._helpers;return b.hasOwnProperty(a)&&delete b[a],this},n.prototype.compile=function(a,c){a=a.toString();var d=j({},this._defaults,c),e=d.filename,f=!0===d.overwrite||this.$$cache(e);return b("Function")(f)?f:(f=this.$compile(a,d),b("String")(e)&&this.$$cache(e,f),f)},n.prototype.render=function(a,b,c){return this.compile(a,c)(b||{})};require("fs");f.SOURCES={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},f.escapeFn=function(a){return f.SOURCES[a]},m("oTemplate",function(){return new n},a)}(this);
//# sourceMappingURL=oTemplate.lite.min.js.map