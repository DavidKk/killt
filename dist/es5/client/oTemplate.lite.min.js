// oTemplate.lite.min.js#1.0.0-beta - 2015-12-13 20:01:15
~function(a){"use strict";function b(a){return function(c){switch(a){case"Undefined":return"undefined"==typeof c;case"Defined":return"undefined"!=typeof c;case"Integer":var d=parseInt(c,10);return!isNaN(d)&&c===d&&c.toString()===d.toString();case"PlainObject":var e,f;return!1===b("Object")(c)||b("Undefined")(c)?!1:(e=c.constructor,"function"!=typeof e?!1:(f=e.prototype,!1===b("Object")(f)?!1:!1===f.hasOwnProperty("isPrototypeOf")?!1:!0));default:return"[object "+a+"]"===Object.prototype.toString.call(c)}}}function c(a){return d(a).replace(/^\s+|\s+$/,"")}function d(a){return b("String")(a)?a:b("Number")(a)?a+="":b("Function")(a)?d(a.call(a)):""}function e(){var a=arguments[0];return void 0===a&&(a=""),a.replace(/("|'|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function f(a){return d(a).replace(/&(?![\w#]+;)|[<>"']/g,f.escapeFn)}function g(a,c,d){for(var e=b("Object")(c)?c[d]:c,f=(g=[0,a.length])[0],g=g[1];g>f;f++)if(e==a[f][d])return f;return-1}function h(a){var c=arguments[1];if(void 0===c&&(c=new Function),b("Function")(c))if(b("Array")(a))if(Array.prototype.some)a.some(c);else for(var d=(e=[0,a.length])[0],e=e[1];e>d&&!0!==c(a[d],d);d++);else if(b("Object")(a))for(var f in a)if(!0===c(a[f],f))break}function i(a){for(var b=(c=[{},[]])[0],c=c[1],d=a.length;d--;)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function j(a){var c=arguments[1];void 0===c&&(c=new Function);var d=b("Array")(a),e=d?[]:{};return h(a,function(a,b){c(a,b)&&(e[d?e.length:b]=a)}),e}function k(){var a=Array.prototype.slice,c=a.call(arguments,0),d=(e=[c[0],c[1]])[0],e=e[1];if(c.length>2){d=k(d,e);var f=Array.prototype.slice.call(c,2);return k.apply({},[d].concat(f))}if(b("Array")(d)&&b("Array")(e))Array.prototype.splice.apply(d,[d.length,0].concat(e));else if(b("Object")(d)&&b("Object")(e))if(b("Function")(Object.assign))d=Object.assign(d,e);else for(var g in e)d[g]=e[g];return d}function l(a,c){function d(a){setTimeout(function(){throw a})}var e="";return b("Object")(a)?h(a,function(a,b){e+="<"+b.substr(0,1).toUpperCase()+b.substr(1)+">\n"+a+"\n\n"}):b("String")(a)&&(e=a),"log"===c?b("Defined")(console)&&b("Function")(console.error)?console.error(e):d(e):"catch"===c&&d(e),e}function m(){return""}function n(a,c,d){var e=(f=[window.define,c(d)])[0],f=f[1];b("Function")(e)?e(function(){return f}):"object"==typeof exports?f.exports=f:d[a]=f}var o=function(){function a(){var c=arguments[0];void 0===c&&(c={});var e=this;this._caches={},this._blocks={},this._blockHelpers={},this._sourceHelpers={},this._helpers={},this.DEFAULTS={},this._listeners=[],~k(this.DEFAULTS,a.DEFAULTS,c),~k(this._helpers,{$escape:function(){return f.apply(f,arguments)},$noescape:function(a){return d(a)},$toString:function(a,c){a=d(a);var f=e.DEFAULTS;return!0===(b("Boolean")(c)?c:f.escape)?e.helper("$escape")(a):a},include:function(a){var b=arguments[1];void 0===b&&(b={});var c=arguments[2];void 0===c&&(c={});var d=(e.DEFAULTS,document.getElementById(a));return d?(e.$$throw({message:"[Include Error]: Template ID "+a+" is not found."}),""):e.render(d.innerHTML,b,c)}}),b("Array")(a._extends)&&h(a._extends,function(a){e["extends"](a)})}var c=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),e=Object.getOwnPropertyDescriptor,i=function(a,b){for(var d in b)b.hasOwnProperty(d)&&c(a,d,e(b,d));return a},j={};return c(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),j.$$throw=function(b){var c=arguments[1];void 0===c&&(c={});var d=k({},this.DEFAULTS,c),e=l(b,d.env===a.ENV.UNIT?"null":"log");h(this._listeners,function(a){"error"===a.type&&a.handle(e)})},j.$$cache=function(a,b){var c=this._caches;return arguments.length>1?(c[a]=b,this):c[a]},j.on=function(a,c){return b("String")(a)&&b("Function")(c)&&this._listeners.push({type:a,handle:c}),this},j.off=function(a){if(b("Function")(a))var c=g(this._listeners,a,"handle")-1!==c&&this._listeners.splice(c,1);return this},j.onError=function(a){return this.on("error",a)},j.OTemplate=function(b){return new a(b)},j["extends"]=function(a){return a.call(this,this),this},j.config=function(a,c){if(1<arguments.length&&b("String")(a))return"openTag"===a&&"<%"===a||"closeTag"===a&&"%>"===a?this:(this.DEFAULTS[a]=c,this);var d=this;return b("PlainObject")(a)?(h(a,function(a,b){d.config(a,b)}),this):b("String")(a)?this.DEFAULTS[a]:void 0},j.helper=function(a,c){if(1<arguments.length)b("String")(a)&&b("Function")(c)&&(this._helpers[a]=c);else{if(b("String")(a))return this._helpers[a];if(b("PlainObject")(a))for(var d in a)this.helper(d,a[d])}return this},j.unhelper=function(a){var b=this._helpers;return b.hasOwnProperty(a)&&delete b[a],this},j.compile=function(a){var c=arguments[1];void 0===c&&(c={}),a=d(a);var e=k({},this.DEFAULTS,c),f=e.filename,g=!0===e.overwrite||this.$$cache(f);return b("Function")(g)?g:(g=this.$compile(a,e),b("String")(f)&&this.$$cache(f,g),g)},j.render=function(a){var b=arguments[1];void 0===b&&(b={});var c=arguments[2];return void 0===c&&(c={}),this.compile(a,c)(b)},i(a.prototype,j),j=void 0,a}();o.ENV=o.prototype.ENV={PRODUCE:1,DEVELOP:2,UNIT:3},o.DEFAULTS={env:o.ENV.PRODUCE,noSyntax:!1,strict:!0,compress:!0,escape:!0,openTag:"{{",closeTag:"}}",depends:[]},o._extends=[],o.extend=function(a){return b("Function")(a)&&o._extends.push(a),this},~k(o.prototype,{$$table:function(){function a(a,b){var c=arguments[2];void 0===c&&(c=" "),a=a.toString(),b=b.toString().replace(/\d/g,c);var d=b.split("");return d.splice(-a.length,a.length,a),d.join("")}return function(b){var c=0,d=b.match(/([^\n]*)?\n|([^\n]+)$/g);if(!d)return c+" | "+b;var e=d.length;return b.replace(/([^\n]*)?\n|([^\n]+)$/g,function(b){return a(++c,e)+" | "+b})}}(),$compileShell:function(){function d(a){var b=a.replace(/\\?\"([^\"])*\\?\"|\\?\'([^\'])*\\?\'|\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|\s*\.\s*[$\w\.]+/g,"").replace(/[^\w$]+/g,",").replace(/^\d[^,]*|,\d[^,]*|^,+|,+$/g,"").split(/^$|,+/);return j(b,function(a){return-1===d.KEYWORDS.indexOf(a)})}return d.KEYWORDS=["$scope","$helpers","$blocks","$data","$buffer","$runtime","$append","abstract","arguments","break","boolean","byte","case","catch","char","class","continue","console","const","debugger","default","delete","do","double","else","enum","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","undefined","var","void","volatile","while","with","yield"],function(f){var g=arguments[1];void 0===g&&(g={});var j=f,k=this.DEFAULTS,l=b("Boolean")(g.escape)?g.escape:k.escape,m=b("Boolean")(g.compress)?g.compress:k.compress,n=this._helpers,o=this._blockHelpers,p=this._sourceHelpers,q=[],r=[],s=[],t=1,u="",v=function(a){for(var b;b=/<%source\\s*([\w\W]+?)?\\s*%>(.+?)<%\/source%>/gim.exec(a);){var c=b[1],d=b[2];d=c&&p.hasOwnProperty(c)?p[c](d):d,d='<%=unescape("'+window.escape(d)+'");%>',a=a.replace(b[0],d)}return a},w=function(a){return a=a.replace(/<!--[\w\W]*?-->/g,"").replace(/^ +$/,""),""===a?"":(t+=a.split(/\n/).length-1,a=a.replace(/(["'\\])/g,"\\$1"),a=!0===m?a.replace(/[\r\t\n]/g,"").replace(/ +/g," "):a.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),'$buffer+="'+a+'";')},x=function(e){return e=c(e||""),h(d(e),function(c){if(c){var d=a[c];if(!b("Function")(d)||!d.toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return b("Function")(n[c])?void q.push(c):b("Function")(o[c])?void r.push(c):void s.push(c)}}),/^=\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$toString("+e.replace(/[=\s;]/g,"")+", "+l+");":/^#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$noescape("+e.replace(/[#\s;]/g,"")+");":/^!#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$escape("+e.replace(/[!#\s;]/g,"")+");":/^\s*([\w\W]+)\s*\([^\)]*?\)\s*$/.exec(e)&&(e="$buffer+=$helpers.$toString("+e+", "+l+");"),t+=e.split(/\n|%0A/).length-1,e+=(/\)$/.exec(e)?";":"")+"$runtime="+t+";"};return f=b("String")(f)?v(f):"",h(f.split("<%"),function(a){a=a.split("%>");var b=(c=[a[0],a[1]])[0],c=c[1];1===a.length?u+=w(b):(u+=x(b),u+=w(c))}),h(i(s),function(a){u="var "+a+("=$data."+a)+(";"+u)}),h(i(q),function(a){u="var "+a+("=$helpers."+a)+(";"+u)}),h(i(r),function(a){u="var "+a+("=$blocks."+a)+(";"+u)}),u="\n        try {\n          'use strict';\n          var $scope=this,\n              $helpers=$scope.$helpers,\n              $blocks=$scope.$blocks,\n              $buffer='',\n              $runtime=0;\n          "+u+(";\n          return $buffer;\n        }\n        catch (err) {\n          throw {\n            message : err.message,\n            line    : $runtime,\n            shell   : '"+e(this.$$table(j)))+"'\n          };\n        }\n\n        function $append(buffer) {\n          $buffer+=buffer;\n        }"}}(),$compile:function(){return function(){function a(a){var c;try{c=new Function(i,l)}catch(f){d.$$throw({message:"[Compile Render]: "+f.message,line:"Javascript syntax occur error, it can not find out the error line.",syntax:e,template:b,shell:l}),c=m}return function(b){try{return c.apply(a,[b].concat(j))}catch(e){e=k({},e,{source:d.$$table(a.$source)}),d.$$throw({message:"[Exec Render]: "+e.message,line:e.line,template:e.source,shell:e.shell})}}}var b=arguments[0];void 0===b&&(b="");var c=arguments[1];void 0===c&&(c={});var d=this,e=b,f=k({},this.DEFAULTS,c),g=f.depends,i=["$data"].concat(g).join(","),j=[];~h(g,function(a){"$"===a.charAt(0)?(a=a.replace("$",""),j.push(f[a])):j.push(void 0)}),!0!==f.noSyntax&&(b=this.$compileSyntax(b,!!f.strict));var l=this.$compileShell(b,f);return a({$source:e,$helpers:this._helpers||{},$blocks:this._blockHelpers||{}})}}()}),o.extend(function(){var a=this;~k(this._helpers,{include:function(b,c,d){return a.renderById(b,c,d)}})}),~k(o.prototype,{compileById:function(a){var c=arguments[1];void 0===c&&(c={}),a=d(a);var e=k({},this._defaults,c,{filename:a}),f=!0===e.overwrite||this.$$cache(a);if(b("Function")(f))return f;var g=document.getElementById(a);return g?this.compile(g.innerHTML,e):(this.$$throw({message:"[Compile Template]: Template ID {templateId} is not found."}),m)},renderById:function(a){var b=arguments[1];void 0===b&&(b={});var c=arguments[2];void 0===c&&(c={});var d=this.compileById(a,c={});return d(b)},compileByAjax:function(a,c){function d(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=c.getElementsByTagName("script"),e=d.length;e--;)if(a===d[e].id)return d[e].innerHTML}var e=arguments[2];if(void 0===e&&(e={}),b("Function")(c)){var f=this,g=k({},this._defaults,e),j=!0===g.overwrite||this.$$cache(a);b("Function")(j)?c(j):this.getSourceByAjax(a,function(b){b=f.$compileSyntax(b,!!g.strict);for(var e=(m=[b,[]])[0],l=m[1],m=m[2];m=/<%!?#?\s*include\s*\(\s*(\'([^\']+)?\'|\"([^\"]+)?\")(\s*,\s*([^\)]+)?)?\)%>/.exec(b);)l.push(m[3]),b=b.replace(m[0],"");var n=l.length,o=function(){0>=--n&&p()},p=function(){j=f.$compile(e),f.$$cache(a,j),c(j),n=void 0};n>0?h(i(l),function(a){if(f.$$cache(a))o();else{var b=d(a,e);if(b)f.compile(b,{filename:a,overwrite:!1}),o();else{var c=document.getElementById(a);c?(f.compile(c.innerHTML,{filename:a,overwrite:!1}),o()):f.compileByAjax(a,o,k(g,{overwrite:!1}))}}}):p()})}},renderByAjax:function(a,c,d){var e=arguments[3];return void 0===e&&(e={}),b("Function")(c)?this.renderByAjax(a,{},c,d):void(b("Function")(d)&&this.compileByAjax(a,function(a){d(a(c||{}))},e))},getSourceByAjax:function(a,c,d){if(b("Function")(c)){var e=(f=[this,new XMLHttpRequest])[0],f=f[1];f.onreadystatechange=function(){var a=this.status;this.DONE===this.readyState&&a>=200&&400>a&&c(this.responseText)},f.onerror=function(){var c={message:"[Compile Template]: Request file "+a+" some error occured.",filename:a,response:"[Reponse State]: "+this.status};e.$$throw(c),b("Function")(d)&&d(c),d=void 0},f.ontimeout=function(){var c={message:"[Request Template]: Request template file "+a+" timeout.",filename:a};e.$$throw(c),b("Function")(d)&&d(c),d=void 0},f.onabort=function(){var c={message:"[Request Template]: Bowswer absort the request.",filename:a};e.$$throw(c),b("Function")(d)&&d(c),d=void 0},f.open("GET",a,!0),f.send(null)}}}),f.SOURCES={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},f.escapeFn=function(a){return f.SOURCES[a]},n("oTemplate",function(){return new o},a)}(this);
//# sourceMappingURL=oTemplate.lite.min.js.map