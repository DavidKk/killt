// oTemplate.min.js#1.0.5 - 2016-02-21 22:48:40
~function(a){"use strict";function b(a,b,d){var e=(f=[d.define,b(d)])[0],f=f[1];c("Function")(e)?e(function(){return f}):d[a]=f}function c(a){return function(b){switch(a){case"Undefined":return"undefined"==typeof b;case"Defined":return"undefined"!=typeof b;case"Integer":var d=parseInt(b,10);return!isNaN(d)&&b===d&&b.toString()===d.toString();case"PlainObject":var e,f;return!1===c("Object")(b)||c("Undefined")(b)?!1:(e=b.constructor,"function"!=typeof e?!1:(f=e.prototype,!1===c("Object")(f)?!1:!1===f.hasOwnProperty("isPrototypeOf")?!1:!0));default:return"[object "+a+"]"===Object.prototype.toString.call(b)}}}function d(a,b){return(a.substr(0,b).match(/\n/g)||[]).length+1}function e(a){return g(a).replace(/^\s+|\s+$/,"")}function f(a,b){var d=arguments[2];if(void 0===d&&(d="."),c("String")(b)){for(var e=(f=[a,b.split(d)])[0],f=f[1],g=(h=[0,f.length])[0],h=h[1];h>g;g++){if(c("Undefined")(e[f[g]]))return;e=e[f[g]]}return c("Undefined")(e)?void 0:e}}function g(a){return c("String")(a)?a:c("Number")(a)?a+="":c("Function")(a)?g(a.call(a)):""}function h(){var a=arguments[0];return void 0===a&&(a=""),a.replace(/("|'|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function i(a){var b={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"};return g(a).replace(/&(?![\w#]+;)|[<>"']/g,function(a){return b[a]})}function j(a,b){if(Array.prototype.indexOf&&c("Function")(a.indexOf))return a.indexOf(b);for(var d=(e=[0,a.length])[0],e=e[1];e>d;d++)if(a[d]===b)return d;return-1}function k(a,b,d){for(var e=c("Object")(b)?b[d]:b,f=(g=[0,a.length])[0],g=g[1];g>f;f++)if(e==a[f][d])return f;return-1}function l(a){var b=arguments[1];if(void 0===b&&(b=new Function),c("Function")(b))if(c("Array")(a))if(Array.prototype.some)a.some(b);else for(var d=(e=[0,a.length])[0],e=e[1];e>d&&!0!==b(a[d],d);d++);else if(c("Object")(a))for(var f in a)if(!0===b(a[f],f))break}function m(a){for(var b=(c=[{},[]])[0],c=c[1],d=a.length;d--;)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function n(a){var b=arguments[1];void 0===b&&(b=new Function);var d=c("Array")(a),e=d?[]:{};return l(a,function(a,c){b(a,c)&&(e[d?e.length:c]=a)}),e}function o(){var a=Array.prototype.slice,b=a.call(arguments,0),d=(e=[b[0],b[1]])[0],e=e[1];if(b.length>2){d=o(d,e);var f=Array.prototype.slice.call(b,2);return o.apply({},[d].concat(f))}if(c("Array")(d)&&c("Array")(e))Array.prototype.splice.apply(d,[d.length,0].concat(e));else if(c("Object")(d)&&c("Object")(e))if(c("Function")(Object.assign))d=Object.assign(d,e);else for(var g in e)d[g]=e[g];return d}function p(a){var b=[];c("Object")(a)?l(a,function(a,c){b.push("<"+c.substr(0,1).toUpperCase()+(""+c.substr(1))+">"),b.push("\n"),b.push(a),b.push("\n\n")}):c("String")(a)&&(b=a);try{console.error.apply(console,b)}catch(d){setTimeout(function(){throw b})}return b}function q(){return""}var r=function(a,b){return a.__proto__={a:b},a.a===b}({},{}),s=Object.defineProperty,t=Object.getOwnPropertyDescriptor,u=function(a,b){for(var c in b)b.hasOwnProperty(c)&&s(a,c,t(b,c));return a},v={PRODUCE:1,DEVELOP:2,UNITEST:3},w={env:v.PRODUCE,noSyntax:!0,strict:!0,escape:!0,compress:!0,openTag:"{{",closeTag:"}}",depends:[]},x=[],y=function(){function b(){var a=arguments[0];void 0===a&&(a={});var b=this;this._caches={},this._blocks={},this._blockHelpers={},this._sourceHelpers={},this._helpers={},this.DEFAULTS={},this._listeners=[],~o(this.DEFAULTS,w,a),~o(this._helpers,{$escape:function(){return i.apply(i,arguments)},$noescape:function(a){return g(a)},$toString:function(a,d){a=g(a);var e=b.DEFAULTS;return!0===(c("Boolean")(d)?d:e.escape)?b.helper("$escape")(a):a},include:function(a){var c=arguments[1];void 0===c&&(c={});var d=arguments[2];void 0===d&&(d={});var e=(b.DEFAULTS,document.getElementById(a));return e?(b._throw({message:"[Include Error]: Template ID "+a+" is not found."}),""):b.render(e.innerHTML,c,d)}}),c("Array")(x)&&x.length>0&&l(x,function(a){b["extends"](a)})}function d(){return v}var f=Object.defineProperties,r={},t={};return f(b.prototype,{ENV:{get:d,configurable:!0,enumerable:!0}}),s(b,"prototype",{configurable:!1,enumerable:!1,writable:!1}),t.config=function(a,b){if(1<arguments.length&&c("String")(a))return"openTag"===a&&"<%"===a||"closeTag"===a&&"%>"===a?this:(this.DEFAULTS[a]=b,this);var d=this;return c("PlainObject")(a)?(l(a,function(a,b){d.config(a,b)}),this):c("String")(a)?this.DEFAULTS[a]:void 0},t.$compileShell=function(){var b=arguments[0];void 0===b&&(b="");var d=arguments[1];void 0===d&&(d={});var f=b,g=o({},this.DEFAULTS,d),i=!!g.escape,j=!!g.compress,k=this._helpers,p=this._blockHelpers,q=this._sourceHelpers,r=[],s=[],t=[],u=1,v="",w=["$append","$blocks","$buffer","$data","$helpers","$scope","$runtime","abstract","arguments","break","boolean","byte","case","catch","char","class","continue","console","const","debugger","default","delete","do","double","else","enum","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","undefined","var","void","volatile","while","with","yield"],x=function(a){var b=a.replace(/\\?\"([^\"])*\\?\"|\\?\'([^\'])*\\?\'|\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|\s*\.\s*[$\w\.]+/g,"").replace(/[^\w$]+/g,",").replace(/^\d[^,]*|,\d[^,]*|^,+|,+$/g,"").split(/^$|,+/);return n(b,function(a){return-1===w.indexOf(a)})},y=function(a){for(var b;b=/<%source\\s*([\w\W]+?)?\\s*%>(.+?)<%\/source%>/gim.exec(a);){var c=b[1],d=b[2];d=c&&q.hasOwnProperty(c)?q[c](d):d,d="<%=unescape('"+window.escape(d)+"')%>",a=a.replace(b[0],d)}return a},z=function(a){return""===a.replace(/<!--[\w\W]*?-->/g,"").replace(/^ +$/,"")?"$buffer+='"+a+"';":(u+=a.split(/\n/).length-1,a=a.replace(/(["'\\])/g,"\\$1"),a=!0===j?a.replace(/<!--[\w\W]*?-->/g,"").replace(/[\r\t\n]/g,"").replace(/ +/g," "):a.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),"$buffer+='"+a+"';")},A=function(b){return b=e(b||""),l(x(b),function(b){if(b){var d=a[b];if(!c("Function")(d)||!d.toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return c("Function")(k[b])?void r.push(b):c("Function")(p[b])?void s.push(b):void t.push(b)}}),/^=\s*[\w\W]+?\s*$/.exec(b)?b="$buffer+=$helpers.$toString("+b.replace(/^=|;$/g,"")+(", "+i)+");":/^#\s*[\w\W]+?\s*$/.exec(b)?b="$buffer+=$helpers.$noescape("+b.replace(/^#|;$/g,"")+");":/^!#\s*[\w\W]+?\s*$/.exec(b)?b="$buffer+=$helpers.$escape("+b.replace(/^!#|;$/g,"")+");":/^\s*([\w\W]+)\s*\([^\)]*?\)\s*$/.exec(b)?b="$buffer+=$helpers.$toString("+b+(", "+i)+");":b+=";",u+=b.split(/\n|%0A/).length-1,b="$runtime="+u+(";"+b)+(""+(/\)$/.exec(b)?";":""))};return b=y(b),l(b.split("<%"),function(a){a=a.split("%>");var b=(c=[a[0],a[1]])[0],c=c[1];1===a.length?v+=z(b):(v+=A(b),v+=z(c))}),l(m(t),function(a){v="var "+a+("=$data."+a)+(";"+v)}),l(m(r),function(a){v="var "+a+("=$helpers."+a)+(";"+v)}),l(m(s),function(a){v="var "+a+("=$blocks."+a)+(";"+v)}),v='try {"use strict";var $scope=this,$helpers=$scope.$helpers,$blocks=$scope.$blocks,$buffer="",$runtime=0;'+v+"return $buffer;}catch(err) {throw {message: err.message,line: $runtime,"+("shell: '"+h(f)+"',")+"args: arguments};}function $append(buffer) {$buffer += buffer;}"},t.$compile=function(){function a(a){function f(b){var e={message:"[Exec Render]: "+b.message,template:c.filename,line:b.line,source:d._table(a.$source,b.line),shell:d._table(b.shell,b.line)};return l(i,function(a,c){e["arguments:"+a]=b.args[c]}),d._throw(e),""}var h;try{h=new Function(i.join(","),k)}catch(m){d._throw({message:"[Compile Render]: "+m.message,template:c.filename,line:"Javascript syntax occur error, it can not find out the error line.",syntax:d._table(e),source:b,shell:k}),h=q}return!1===g?function(b){try{var c=h.apply(a,[b].concat(j));return c.replace(/<!--([\w\W]+?)-->/g,function(a,b){return"<!--"+window.unescape(b)+"-->"})}catch(d){return f(d)}}:function(b){try{return h.apply(a,[b].concat(j))}catch(c){return f(c)}}}var b=arguments[0];void 0===b&&(b="");var c=arguments[1];void 0===c&&(c={});var d=this,e=b,f=o({},this.DEFAULTS,c),g=!!f.compress,h=f.depends,i=["$data"].concat(h),j=[];~l(h,function(a){"$"===a.charAt(0)?(a=a.replace("$",""),j.push(f[a])):j.push(void 0)}),!1===g&&(b=b.replace(/<!--([\w\W]+?)-->/g,function(a,b){return"<!--"+window.escape(b)+"-->"})),!0!==f.noSyntax&&(b=this.$compileSyntax(b,!!f.strict));var k=this.$compileShell(b,f);return a({$source:e,$helpers:this._helpers||{},$blocks:this._blockHelpers||{}})},t.compile=function(a){var b=arguments[1];void 0===b&&(b={}),a=g(a);var d=o({},this.DEFAULTS,b),e=d.filename,f=!0===d.override||this._cache(e);return c("Function")(f)?f:(f=this.$compile(a,d),c("String")(e)&&this._cache(e,f),f)},t.render=function(a){var c=arguments[1];void 0===c&&(c={});var d=arguments[2];return void 0===d&&(d={}),b.prototype.compile.call(this,a,d)(c)},t.helper=function(a,b){if(1<arguments.length)c("String")(a)&&c("Function")(b)&&(this._helpers[a]=b);else{if(c("String")(a))return this._helpers[a];if(c("PlainObject")(a))for(var d in a)this.helper(d,a[d])}return this},t.unhelper=function(a){var b=this._helpers;return b.hasOwnProperty(a)&&delete b[a],this},t.on=function(a,b){return c("String")(a)&&c("Function")(b)&&this._listeners.push({type:a,handle:b}),this},t.off=function(a){if(c("Function")(a))var b=k(this._listeners,a,"handle")-1!==b&&this._listeners.splice(b,1);return this},t.onError=function(a){return this.on("error",a)},t["extends"]=function(a){return a.call(this,this),this},t._throw=function(a){var b=arguments[1];void 0===b&&(b={});var c=o({},this.DEFAULTS,b),d=-1===j([v.UNIT],c.env)&&p(a);l(this._listeners,function(b){"error"===b.type&&b.handle(a,d)})},t._cache=function(a,b){var c=this._caches;return arguments.length>1?(c[a]=b,this):c[a]},t._table=function(a,b){function c(a,b){var c=arguments[2];void 0===c&&(c=" "),a=a.toString(),b=b.toString().replace(/\d/g,c);var d=b.split("");return d.splice(-a.length,a.length,a),d.join("")}var d=0,e=a.match(/([^\n]*)?\n|([^\n]+)$/g);if(!e)return"> "+d+("|"+a);var f=e.length,g=(h=[0,f])[0],h=h[1];return b>0&&f>b&&(g=b-3,h=b+3),a.replace(/([^\n]*)?\n|([^\n]+)$/g,function(a){return++d,d>=g&&h>=d?d===b?"> "+c(d,f)+("|"+a):"  "+c(d,f)+("|"+a):""})},t.$divide=function(a){return new this.constructor(a)},r.extend=function(a){return c("Function")(a)&&x.push(a),this},t.$compileSyntax=function(){throw new Error("Function `$compileSyntax` does not be implemented.")},u(b,r),u(b.prototype,t),r=t=void 0,b}(),z=function(){function a(){}s(a,"prototype",{configurable:!1,enumerable:!1,writable:!1});var b={};return b._compile=function(a,b){return b=c("PlainObject")(b)?b:this.DEFAULTS,a.replace(/<%=\s*([^\s]+?)\s*%>/gim,function(a,c){return f(b,c)||""})},b._compileRegexp=function(a,b){var c=this._compile(a);return new RegExp(c,b)},b._compileSyntax=function(a){var b=arguments[1];void 0===b&&(b=!0);var c=arguments[2];void 0===c&&(c=a);var e=!1;if(l(this._blocks,function(b){var c=a.replace(b.syntax,b.shell);return c!==a?(a=c,e=!0,!0):void 0}),!1===e){var f=c.search(a),g=d(c,f);return this._throw({message:"[Syntax Error]: "+a+(" did not match any syntax in line "+g)+".",syntax:this._table(c,g)}),!0===b?!1:""}return a},b.$compileSyntax=function(a){function b(a){return a.replace(/<%/g,"&lt;%").replace(/%>/g,"%&gt;")}var c=arguments[1];void 0===c&&(c=!0);var e,f=this,g=a,h=this.DEFAULTS;this._blocks;if(a=b(a),l(a.split(h.openTag),function(b){var d=b.split(h.closeTag);return 1!==d.length&&(a=a.replace(""+h.openTag+(""+d[0])+(""+h.closeTag),function(a){return e=f._compileSyntax(a,c,g)})),!1===e?(a="",!0):void 0}),""===a)return"";var i=this._compileRegexp("<%= openTag %>|<%= closeTag %>","igm"),j=a.search(i);if(-1!==j){if(!0===c){var k=d(a,j);return this._throw({message:"[Syntax Error]: Syntax error in line "+k+".",syntax:this._table(g,k)}),""}return this.$clearSyntax(a)}return a},b.$clearSyntax=function(a){var b=this._compileRegexp("<%= openTag %>(.*)?<%= closeTag %>","igm");return a.replace(b,"")},b.$registerSyntax=function(a,b,d){var e=this;return 2<arguments.length?this._blocks[a]={syntax:c("RegExp")(b)?b:this._compileRegexp("<%= openTag %>"+b+"<%= closeTag %>","igm"),shell:c("Function")(d)?d:"<%"+this._compile(d)+"%>"}:c("PlainObject")(b)?l(b,function(b,c){e.$registerSyntax(a,c,b)}):c("Array")(b)&&l(b,function(b){c("String")(b.syntax)&&c("String")(b.shell)||c("Function")(b.shell)&&e.$registerSyntax(a,b.syntax,b.shell)}),this},b.$unregisterSyntax=function(a){var b=this._blocks;return b.hasOwnProperty(a)&&delete b[a],this},b.block=function(a,b){if(1<arguments.length)c("String")(a)&&c("Function")(b)&&(this.$registerSyntax(""+a+"open","("+a+")\\s*(,?\\s*([\\w\\W]+?))\\s*(:\\s*([\\w\\W]+?))?\\s*",function(a,b,c,d,e,f){return"<%"+b+("($append, "+(c?c+", ":""))+("function ("+(f||""))+") {'use strict';var $buffer='';%>"}).$registerSyntax(""+a+"close","/"+a,"return $buffer;});"),this._blockHelpers[a]=function(a){var c=Array.prototype.splice.call(arguments,1);a(b.apply(this,c))});else{if(c("String")(a))return this._blockHelpers[a];if(c("PlainObject")(a))for(var d in a)this.block(d,a[d])}return this},b.unblock=function(a){var b=this._blockHelpers,c=this._blocks;return b.hasOwnProperty(a)&&(delete b[a],delete c[""+a+"open"],delete c[""+a+"close"]),this},u(a.prototype,b),b=void 0,a}();w.noSyntax=!1,~o(y.prototype,z.prototype),y.extend(function(){var a="(=|-|!|#|!#)?\\s*([^|]+?(?:\\s*(?:\\|\\||\\&\\&)\\s*[^|]+?)*)\\s*\\|\\s*([^:\\|]+?)\\s*(?:\\:\\s*([^\\|]+?))?\\s*(\\|\\s*[\\w\\W]+?)?",b=(this._compileRegexp(a),"\\s*([\\w\\W]+?\\s*\\([\\w\\W]+?\\))\\s*\\|\\s*([^:]+?)\\s*(:\\s*([^\\|]+?))?$"),c=this._compileRegexp(b);this.$registerSyntax("helper",a,function(){function a(a,b,c,d,f,g){return""+d+("("+e(c))+(""+(f?","+f:""))+(")"+(g?g.replace(/^\s*$/,""):""))}function b(a,b,c,d,e){return""+c+("("+b)+(","+e)+")"}return function(d,e,f,h,i,j){for(var k=a.apply(this,arguments);c.exec(k);)k=k.replace(c,b);return"<%"+g(e)+(""+k)+"%>"}}()).$registerSyntax("echo","=\\s*([\\w\\W]+?)\\s*","=$1").$registerSyntax("logic","-\\s*([\\w\\W]+?)\\s*","$1").$registerSyntax("noescape","#\\s*([\\w\\W]+?)\\s*","#$1").$registerSyntax("escape","!#\\s*([\\w\\W]+?)\\s*","!#$1").$registerSyntax("ifopen","if\\s*(.+?)\\s*","if ($1) {").$registerSyntax("else","else","} else {").$registerSyntax("elseif","else\\s*if\\s*(.+?)\\s*","} else if ($1) {").$registerSyntax("ifclose","\\/if","}").$registerSyntax("eachopen","each\\s*([\\w\\W]+?)\\s*(as\\s*(\\w*?)\\s*(,\\s*\\w*?)?)?\\s*",function(a,b,c,d,e){var f="each("+b+(", function("+(d||"$value"))+(""+(e||", $index"))+") {";return"<%"+f+"%>"}).$registerSyntax("eachclose","\\/each","})").$registerSyntax("include","include\\s*([\\w\\W]+?)\\s*(,\\s*([\\w\\W]+?))?\\s*",function(a,b,c,d){return"<%#include('"+b.replace(/[\'\"\`]/g,"")+("', "+(d||"$data"))+")%>"}),~o(this._helpers,{each:function(a,b){l(a,b)}})});var A=function(a){function b(){var a=this;y.apply(this,arguments),~o(this._helpers,{include:function(b,c,d){return a.renderSync(b,c,d)}})}var d=Object.setPrototypeOf||function(a,b){return r?a.__proto__=b:s(a,"__proto__",{value:b,configurable:!0,enumerable:!1,writable:!0}),a},e=Object.create;r||u(b,a);var f={};return null!==a&&d(b,a),b.prototype=e(null!==a?a.prototype:null,{constructor:{value:b,configurable:!0,writable:!0}}),s(b,"prototype",{configurable:!1,enumerable:!1,writable:!1}),f.compileSource=function(a,b){return y.prototype.compile.apply(this,arguments)},f.renderSource=function(a,b){return y.prototype.render.apply(this,arguments)},f.compile=function(a,b){function d(a,b){var c=document.createElement("div");c.innerHTML=b;for(var d=c.getElementsByTagName("script"),e=d.length;e--;)if(a===d[e].id)return d[e].innerHTML}var e=arguments[2];void 0===e&&(e={});var f=o({},this.DEFAULTS,e,{filename:a}),h=!!f.sync;if(c("Object")(b))return this.compile(a,null,b);if(!1!==h||c("Function")(b)){a=g(a);var i=this,j=!0===f.override?void 0:this._cache(a);if(c("Function")(j))return h?j:void b(j);var k=document.getElementById(a);if(k){var n=k.innerHTML.replace(/^ *\n|\n *$/g,"");return j=this.compileSource(n,f),h?j:void b(j)}return this.getSourceByAjax(a,function(c){var e=(g=[c,[]])[0],g=g[1];!1===f.noSyntax&&(c=i.$compileSyntax(c,f.strict)),l(c.split("<%"),function(a){var b=(c=[a.split("%>")])[0],c=c[1];1!==b.length&&(c=/include\s*\(\s*([\w\W]+?)(\s*,\s*([^\)]+)?)?\)/.exec(b[0]))&&g.push(c[1].replace(/[\'\"\`]/g,""))});var k=g.length,n=function(){0>=--k&&o()},o=function(){j=i.$compile(e),i._cache(a,j),!1===h&&b(j),k=void 0};k>0?l(m(g),function(a){if(i._cache(a))n();else{var b=d(a,e);b?(i.compileSource(b,{filename:a,override:!!f.override}),n()):i.compile(a,n,f)}}):o()},{sync:h}),j}},f.render=function(a,b,d){var e=arguments[3];void 0===e&&(e={});var f=o({},this.DEFAULTS,e,{filename:a}),g=!!f.sync;if(c("Object")(d)){var h=this.compile(a,null,o(d,{sync:!0}));return h(b||{})}(!1!==g||c("Function")(d))&&this.compile(a,function(a){var c=a(b||{});d(c)},f)},f.compileSync=function(a,b){var c=o({},b,{sync:!0});return this.compile(a,null,c)},f.renderSync=function(a,b,c){var d=this.compileSync(a,c);return d(b||{})},f.compileAsync=function(a,b,c){var d=o({},c,{sync:!1});this.compile(a,b,d)},f.renderAsync=function(a,b,d,e){return c("Function")(b)?this.renderAsync(a,{},b,d):void(c("Function")(d)&&this.compileAsync(a,function(a){d(a(b||{}))},e))},f.getSourceByAjax=function(a,b){var d=arguments[2];if(void 0===d&&(d={}),c("Function")(b)){var e=(f=[this,new XMLHttpRequest])[0],f=f[1];f.onreadystatechange=function(){var a=this.status;this.DONE===this.readyState&&a>=200&&400>a&&b(this.responseText)},f.onerror=function(){var b={message:"[Compile Template]: Request file "+a+" some error occured.",filename:a,response:"[Reponse State]: "+this.status};e._throw(b),c("Function")(d["catch"])&&d["catch"](b)},f.ontimeout=function(){var b={message:"[Request Template]: Request template file "+a+" timeout.",filename:a};e._throw(b),c("Function")(d["catch"])&&d["catch"](b)},f.onabort=function(){var b={message:"[Request Template]: Bowswer absort the request.",filename:a};e._throw(b),c("Function")(d["catch"])&&d["catch"](b)},f.open("GET",a,!d.sync),f.send(null)}},u(b.prototype,f),f=void 0,b}(y);b("oTemplate",function(){return new A},a)}(this);
//# sourceMappingURL=oTemplate.min.js.map