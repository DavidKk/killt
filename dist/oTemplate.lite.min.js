// oTemplate.min.js#1.0.0-pre - 2015-09-03 20:46:21
~function(a){"use strict";function b(a){return Object.prototype.toString.call(a)}function c(a){return"[object String]"===b(a)}function d(a){return"[object Boolean]"===b(a)}function e(a){return"[object Number]"===b(a)}function f(a){return"[object Object]"===b(a)}function g(a){return"[object Function]"===b(a)}function h(a){return"undefined"!=typeof a}function i(a){return"undefined"==typeof a}function j(a){return"[object Array]"===b(a)}function k(a){var b,c;return!1===f(a)||i(a)?!1:(b=a.constructor,"function"!=typeof b?!1:(c=b.prototype,!1===f(c)?!1:!1===c.hasOwnProperty("isPrototypeOf")?!1:!0))}function l(a){return c(a)?a:e(a)?a+="":g(a)?l(a.call(a)):""}function m(a){return a.replace(/("|'|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function n(a,b){if(g(b)){var c;if(j(a))if(Array.prototype.some)a.some(b);else{var d=a.length;for(c=0;d>c&&!0!==b(a[c],c);c++);}else if(f(a))for(c in a)if(!0===b(a[c],c))break}}function o(a){for(var b={},c=[],d=a.length;d--;)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function p(a,b){var c=j(a),d=c?[]:{};return n(a,function(a,e){b(a,e)&&(d[c?d.length:e]=a)}),d}function q(a,b){if(arguments.length>2){a=q(a,b);var c=Array.prototype.slice.call(arguments,2,arguments.length);return q(a,c[0])}if(j(a)&&j(b))Array.prototype.splice.apply(a,[a.length,0].concat(b));else if(k(a)&&k(b))for(var d in b)a[d]=b[d];return a}function r(a){if(h(console)&&g(console.error)){var b="";f(a)?n(a,function(a,c){b+="<"+c+">\n"+a+"\n\n"}):c(a)&&(b=a),console.error(b)}}function s(){return""}function t(a,b,c){"function"==typeof define?define(function(){return b(c)}):"object"==typeof exports?module.exports=b(c):c[a]=b(c)}function u(a,b){if(g(b)){var c=new XMLHttpRequest;c.onreadystatechange=function(){this.DONE===this.readyState&&b(this.responseText)},c.onerror=c.ontimeout=c.onabort=function(){b("")},c.open("GET",a,!0),c.send(null)}}var v=function(a){a=a||{};var b=this;this._caches={},this._blocks={},this._blockHelpers={},this._helpers={},this._defaults={},q(this._defaults,v._defaults,a),g(v._extends)&&this["extends"](v._extends),~q(this._helpers,{include:function(a,c,d){return b.renderTpl(a,c,d)},escape:function(){var a={};return a.SOURCES={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},a.escapeFn=function(a){return this.SOURCES[a]},a.escape=function(a){return l(a).replace(/&(?![\w#]+;)|[<>"']/g,this.escapeFn)},function(){return a.escape.apply(a,arguments)}}()})};v._defaults={env:"produce",noSyntax:!1,strict:!0,compress:!0,openTag:"{{",closeTag:"}}",depends:[]},v.prototype.$$throw=function(a){"unit"!==this._defaults.env&&r(a)},v.prototype.$$cache=function(a,b){var c=this._caches;return arguments.length>1?(c[a]=b,this):c[a]},v.prototype.$$table=function(a){function b(a,b,c){c=c||" ",a=a.toString(),b=b.toString().replace(/\d/g,c);var d=b.split("");return d.splice(-a.length,a.length,a),d.join("")}var c=0,d=a.match(/([^\n]*)?\n|([^\n]+)$/g);if(!d)return c+" | "+a;var e=d.length;return a.replace(/([^\n]*)?\n|([^\n]+)$/g,function(a){return b(++c,e)+" | "+a})},v.prototype.$compileShell=function(b,c){function e(a){return a=a.replace(/<!--[\w\W]*?-->/g,"").replace(/^ +$/,""),""===a?"":(r+=a.split(/\n/).length-1,a=a.replace(/(["'\\])/g,"\\$1"),a=!0===c?a.replace(/[\r\t\n]/g,"").replace(/ +/g," "):a.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),'$buffer+="'+a+'";')}function f(b){return n(h(b),function(b){if(b){var c=a[b];if(!g(c)||!c.toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return g(i[b])?void k.push(b):g(j[b])?void l.push(b):void q.push(b)}}),/^=\s*[\w]+?\s*$/.exec(b)?b="$buffer+=("+b.replace(/[=\s;]/g,"")+')||"";':/^\s*\w+\s*\([^\)]*?\)\s*$/.exec(b)&&(b="$buffer+="+b+'||"";'),r+=b.split(/\n/).length-1,b+="$runtime="+r+";"}function h(a){var b=["$data","$helper","$buffer","$runtime","$append","abstract","arguments","break","boolean","byte","case","catch","char","class","continue","console","const","debugger","default","delete","do","double","else","enum","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","undefined","var","void","volatile","while","with","yield"],c=a.replace(/\\?\"([^\"])*\\?\"|\\?\'([^\'])*\\?\'|\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|\s*\.\s*[$\w\.]+/g,"").replace(/[^\w$]+/g,",").replace(/^\d[^,]*|,\d[^,]*|^,+|,+$/g,"").split(/^$|,+/);return p(c,function(a){return-1===b.indexOf(a)})}c=d(c)?c:this._defaults.compress;var i=this._helpers,j=this._blockHelpers,k=[],l=[],q=[],r=1,s="";return b=b||"",n(b.split("<%"),function(a){a=a.split("%>");var b=a[0],c=a[1];1===a.length?s+=e(b):(s+=f(b),s+=e(c))}),n(o(q),function(a){s="var "+a+"=$data."+a+";"+s}),n(o(k),function(a){s="var "+a+"=$helpers."+a+";"+s}),n(o(l),function(a){s="var "+a+"=$blocks."+a+";"+s}),s='try {"use strict";var $scope=this,$helpers=$scope.$helpers,$blocks=$scope.$blocks,$buffer="",$runtime=0;'+s+'return $buffer;}catch(err) {throw {message: err.message,line: $runtime,shell: "'+m(this.$$table(b))+'"};}function $append(buffer) {$buffer += buffer}'},v.prototype.$compile=function(a,b){function c(b,c,d){var e;try{e=new Function(c,b)}catch(f){r({message:"[Build Render]: "+f.message,line:"Anonymous function can not find out the error line.",template:a,shell:b}),e=s}return function(){try{return e.apply(d,arguments)}catch(a){a=q({},a,{source:d.$source}),r({message:"[Exec Render]: "+a.message,line:a.line,source:a.source,shell:a.shell})}}}var d=a,e=q({},this._defaults,b),f=["$data"].concat(e.depends).join(",");!0!==e.noSyntax&&(a=this.$compileSyntax(a,!!e.strict));var g=this.$compileShell(a);return c(g,f,{$source:this.$$table(d),$helpers:this._helpers,$blocks:this._blockHelpers})},v.prototype.OTemplate=function(a){return new v(a)},v.prototype["extends"]=function(a){return a.call(this,this),this},v.prototype.config=function(a,b){if(1<arguments.length&&c(a))return"openTag"===a&&"<%"===a||"closeTag"===a&&"%>"===a?this:(this._defaults[a]=b,this);var d=this;return k(a)?(n(options,function(a,b){d.config(a,b)}),this):c(a)?this._defaults[a]:void 0},v.prototype.helper=function(a,b){if(1<arguments.length)c(a)&&g(b)&&(this._helpers[a]=b);else{if(c(a))return this._helpers[a];if(k(a)){var d;for(d in a)this.helper(d,a[d])}}return this},v.prototype.unhelper=function(a){var b=this._helpers;return b.hasOwnProperty(a)&&delete b[a],this},v.prototype.compile=function(a,b){a=a.toString();var d=q({},this._defaults,b),e=d.filename,f=!0===d.overwrite||this.$$cache(e);return g(f)?f:(f=this.$compile(a,d),c(e)&&this.$$cache(e,f),f)},v.prototype.render=function(a,b,c){return this.compile(a,c)(b||{})},v.prototype.compileTpl=function(a,b){a=a.toString();var c=q({},this._defaults,b),d=!0===c.overwrite||this.$$cache(a);if(g(d))return d;var e=document.getElementById(a);return e?this.compile(e.innerHTML,{filename:a},c):r({message:"[Compile Template]: template `"+a+"` is not found."})||s},v.prototype.renderTpl=function(a,b,c){var d=this.compileTpl(a,c);return d(b||{})},v.prototype.compileFile=function(a,b,c){if(g(b)){var d=this,e=q({},this._defaults,c),f=!0===e.overwrite||this.$$cache(a);g(f)?b(f):u(a,function(c){function g(){f=d.$compile(c),d.$$cache(a,f),b(f)}for(var h,i=c,j=[];h=/include\s*\([\"\']([\w\/\.]+)[\"\']?\s*(,\s*\{[^\}]+\})\)/g.exec(i);)j.push(h[1]),i=i.replace(h[0],"");var k=j.length;k>0?n(j,function(a){d.compileFile(a,function(){0>=--k&&g()},q(e,{overwrite:!1}))}):g()})}},v.prototype.renderFile=function(a,b,c,d){return g(b)?this.renderFile(a,{},b,c):void(g(c)&&this.compileFile(a,function(a){c(a(b||{}))},d))},t("oTemplate",function(){return new v},a)}(this);
//# sourceMappingURL=oTemplate.lite.min.js.map