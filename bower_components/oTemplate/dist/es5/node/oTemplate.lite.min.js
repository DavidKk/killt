// oTemplate.lite.min.js#1.0.0-beta - 2015-12-19 17:37:43
~function(a){"use strict";function b(a){return function(c){switch(a){case"Undefined":return"undefined"==typeof c;case"Defined":return"undefined"!=typeof c;case"Integer":var d=parseInt(c,10);return!isNaN(d)&&c===d&&c.toString()===d.toString();case"PlainObject":var e,f;return!1===b("Object")(c)||b("Undefined")(c)?!1:(e=c.constructor,"function"!=typeof e?!1:(f=e.prototype,!1===b("Object")(f)?!1:!1===f.hasOwnProperty("isPrototypeOf")?!1:!0));default:return"[object "+a+"]"===Object.prototype.toString.call(c)}}}function c(a){return d(a).replace(/^\s+|\s+$/,"")}function d(a){return b("String")(a)?a:b("Number")(a)?a+="":b("Function")(a)?d(a.call(a)):""}function e(){var a=arguments[0];return void 0===a&&(a=""),a.replace(/("|'|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n")}function f(a){return d(a).replace(/&(?![\w#]+;)|[<>"']/g,f.escapeFn)}function g(a,c,d){for(var e=b("Object")(c)?c[d]:c,f=(g=[0,a.length])[0],g=g[1];g>f;f++)if(e==a[f][d])return f;return-1}function h(a){var c=arguments[1];if(void 0===c&&(c=new Function),b("Function")(c))if(b("Array")(a))if(Array.prototype.some)a.some(c);else for(var d=(e=[0,a.length])[0],e=e[1];e>d&&!0!==c(a[d],d);d++);else if(b("Object")(a))for(var f in a)if(!0===c(a[f],f))break}function i(a){for(var b=(c=[{},[]])[0],c=c[1],d=a.length;d--;)b.hasOwnProperty(a[d])||(c.push(a[d]),b[a[d]]=1);return c}function j(a){var c=arguments[1];void 0===c&&(c=new Function);var d=b("Array")(a),e=d?[]:{};return h(a,function(a,b){c(a,b)&&(e[d?e.length:b]=a)}),e}function k(){var a=Array.prototype.slice,c=a.call(arguments,0),d=(e=[c[0],c[1]])[0],e=e[1];if(c.length>2){d=k(d,e);var f=Array.prototype.slice.call(c,2);return k.apply({},[d].concat(f))}if(b("Array")(d)&&b("Array")(e))Array.prototype.splice.apply(d,[d.length,0].concat(e));else if(b("Object")(d)&&b("Object")(e))if(b("Function")(Object.assign))d=Object.assign(d,e);else for(var g in e)d[g]=e[g];return d}function l(a,c){var d="",e=function(a){setTimeout(function(){throw a})};return b("Object")(a)?h(a,function(a,b){d+="<"+b.substr(0,1).toUpperCase()+b.substr(1)+">\n"+a+"\n\n"}):b("String")(a)&&(d=a),"log"===c?b("Defined")(console)&&b("Function")(console.error)?console.error(d):e(d):"catch"===c&&e(d),d}function m(){return""}function n(a,c,d){var e=(f=[d.define,c(d)])[0],f=f[1];b("Function")(e)?e(function(){return f}):"object"==typeof exports?f.exports=f:d[a]=f}var o=function(){function a(){var c=arguments[0];void 0===c&&(c={});var e=this;this._caches={},this._blocks={},this._blockHelpers={},this._sourceHelpers={},this._helpers={},this.DEFAULTS={},this._listeners=[],~k(this.DEFAULTS,a.DEFAULTS,c),~k(this._helpers,{$escape:function(){return f.apply(f,arguments)},$noescape:function(a){return d(a)},$toString:function(a,c){a=d(a);var f=e.DEFAULTS;return!0===(b("Boolean")(c)?c:f.escape)?e.helper("$escape")(a):a},include:function(a){var b=arguments[1];void 0===b&&(b={});var c=arguments[2];void 0===c&&(c={});var d=(e.DEFAULTS,document.getElementById(a));return d?(e._throw({message:"[Include Error]: Template ID "+a+" is not found."}),""):e.render(d.innerHTML,b,c)}}),b("Array")(a._extends)&&h(a._extends,function(a){e["extends"](a)})}var c=(function(a,b){return a.__proto__={a:b},a.a===b}({},{}),Object.defineProperty),e=Object.getOwnPropertyDescriptor,i=function(a,b){for(var d in b)b.hasOwnProperty(d)&&c(a,d,e(b,d));return a},j={},m={};return c(a,"prototype",{configurable:!1,enumerable:!1,writable:!1}),m._throw=function(b){var c=arguments[1];void 0===c&&(c={});var d=k({},this.DEFAULTS,c),e=l(b,d.env===a.ENV.UNIT?"null":"log");h(this._listeners,function(a){"error"===a.type&&a.handle(b,e)})},m._cache=function(a,b){var c=this._caches;return arguments.length>1?(c[a]=b,this):c[a]},m.on=function(a,c){return b("String")(a)&&b("Function")(c)&&this._listeners.push({type:a,handle:c}),this},m.off=function(a){if(b("Function")(a))var c=g(this._listeners,a,"handle")-1!==c&&this._listeners.splice(c,1);return this},m.onError=function(a){return this.on("error",a)},m.OTemplate=function(b){return new a(b)},m["extends"]=function(a){return a.call(this,this),this},m.config=function(a,c){if(1<arguments.length&&b("String")(a))return"openTag"===a&&"<%"===a||"closeTag"===a&&"%>"===a?this:(this.DEFAULTS[a]=c,this);var d=this;return b("PlainObject")(a)?(h(a,function(a,b){d.config(a,b)}),this):b("String")(a)?this.DEFAULTS[a]:void 0},m.helper=function(a,c){if(1<arguments.length)b("String")(a)&&b("Function")(c)&&(this._helpers[a]=c);else{if(b("String")(a))return this._helpers[a];if(b("PlainObject")(a))for(var d in a)this.helper(d,a[d])}return this},m.unhelper=function(a){var b=this._helpers;return b.hasOwnProperty(a)&&delete b[a],this},m.compile=function(a){var c=arguments[1];void 0===c&&(c={}),a=d(a);var e=k({},this.DEFAULTS,c),f=e.filename,g=!0===e.override||this._cache(f);return b("Function")(g)?g:(g=this.$compile(a,e),b("String")(f)&&this._cache(f,g),g)},m.render=function(a){var b=arguments[1];void 0===b&&(b={});var c=arguments[2];return void 0===c&&(c={}),this.compile(a,c)(b)},j.extend=function(c){return b("Function")(c)&&a._extends.push(c),this},i(a,j),i(a.prototype,m),j=m=void 0,a}();o.ENV={PRODUCE:1,DEVELOP:2,UNIT:3},o.DEFAULTS={env:o.ENV.PRODUCE,noSyntax:!1,strict:!0,compress:!0,escape:!0,openTag:"{{",closeTag:"}}",depends:[]},o._extends=[],~k(o.prototype,{ENV:o.ENV,_table:function(){function a(a,b){var c=arguments[2];void 0===c&&(c=" "),a=a.toString(),b=b.toString().replace(/\d/g,c);var d=b.split("");return d.splice(-a.length,a.length,a),d.join("")}return function(b,c){var d=0,e=b.match(/([^\n]*)?\n|([^\n]+)$/g);if(!e)return"> "+d+("|"+b);var f=e.length,g=(h=[0,f])[0],h=h[1];return c>0&&f>c&&(g=c-3,h=c+3),b.replace(/([^\n]*)?\n|([^\n]+)$/g,function(b){return++d,d>=g&&h>=d?""+(d===c?">":" ")+(" "+a(d,f))+("|"+b):""})}}(),$compileShell:function(){var d=function(a){var b=a.replace(/\\?\"([^\"])*\\?\"|\\?\'([^\'])*\\?\'|\/\*[\w\W]*?\*\/|\/\/[^\n]*\n|\/\/[^\n]*$|\s*\.\s*[$\w\.]+/g,"").replace(/[^\w$]+/g,",").replace(/^\d[^,]*|,\d[^,]*|^,+|,+$/g,"").split(/^$|,+/);return j(b,function(a){return-1===d.KEYWORDS.indexOf(a)})};return d.KEYWORDS=["$scope","$helpers","$blocks","$data","$buffer","$runtime","$append","abstract","arguments","break","boolean","byte","case","catch","char","class","continue","console","const","debugger","default","delete","do","double","else","enum","export","extends","false","final","finally","float","for","function","goto","if","implements","import","in","instanceof","int","interface","let","long","native","new","null","package","private","protected","public","return","short","static","super","switch","synchronized","this","throw","throws","transient","true","try","typeof","undefined","var","void","volatile","while","with","yield"],function(){var f=arguments[0];void 0===f&&(f="");var g=arguments[1];void 0===g&&(g={});var j=f,k=this.DEFAULTS,l=b("Boolean")(g.escape)?g.escape:k.escape,m=b("Boolean")(g.compress)?g.compress:k.compress,n=this._helpers,o=this._blockHelpers,p=this._sourceHelpers,q=[],r=[],s=[],t=1,u="",v=function(a){for(var b;b=/<%source\\s*([\w\W]+?)?\\s*%>(.+?)<%\/source%>/gim.exec(a);){var c=b[1],d=b[2];d=c&&p.hasOwnProperty(c)?p[c](d):d,d="<%=unescape('"+window.escape(d)+"')%>",a=a.replace(b[0],d)}return a},w=function(a){var b=function(a,b,c,d){return""+b+(""+c.replace(new RegExp("<%|%>","gim"),function(a){return a.replace(new RegExp("("+a.split("").join("|")+")","gim"),"\\$1")}))+(""+d)};return a.replace(new RegExp("(')([\\w\\W]+?)(')","gim"),b).replace(new RegExp('(")([\\w\\W]+?)(")',"gim"),b).replace(new RegExp("(`)([\\w\\W]+?)(`)","gim"),b)},x=function(a){return a=a.replace(/<!--[\w\W]*?-->/g,"").replace(/^ +$/,""),""===a?"":(t+=a.split(/\n/).length-1,a=a.replace(/(["'\\])/g,"\\$1"),a=!0===m?a.replace(/[\r\t\n]/g,"").replace(/ +/g," "):a.replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),"$buffer+='"+a+"';")},y=function(e){return e=c(e||""),h(d(e),function(c){if(c){var d=a[c];if(!b("Function")(d)||!d.toString().match(/^\s*?function \w+\(\) \{\s*?\[native code\]\s*?\}\s*?$/i))return b("Function")(n[c])?void q.push(c):b("Function")(o[c])?void r.push(c):void s.push(c)}}),/^=\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$toString("+e.replace(/^=|;$/g,"")+(", "+l)+");":/^#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$noescape("+e.replace(/^#|;$/g,"")+");":/^!#\s*[\w\W]+?\s*$/.exec(e)?e="$buffer+=$helpers.$escape("+e.replace(/^!#|;$/g,"")+");":/^\s*([\w\W]+)\s*\([^\)]*?\)\s*$/.exec(e)?e="$buffer+=$helpers.$toString("+e+(", "+l)+");":e+=";",t+=e.split(/\n|%0A/).length-1,e="$runtime="+t+(";"+e)+(""+(/\)$/.exec(e)?";":""))};return f=v(f),f=w(f),h(f.split("<%"),function(a){a=a.split("%>");var b=(c=[a[0],a[1]])[0],c=c[1];1===a.length?u+=x(b):(u+=y(b),u+=x(c))}),h(i(s),function(a){u="var "+a+("=$data."+a)+(";"+u)}),h(i(q),function(a){u="var "+a+("=$helpers."+a)+(";"+u)}),h(i(r),function(a){u="var "+a+("=$blocks."+a)+(";"+u)}),u='try {"use strict";var $scope=this,$helpers=$scope.$helpers,$blocks=$scope.$blocks,$buffer="",$runtime=0;'+u+"return $buffer;}catch(err) {throw {message: err.message,line: $runtime,"+("shell: '"+e(j)+"'")+"};}function $append(buffer) {$buffer += buffer;}"}}(),$compile:function(){return function(){function a(a){var c;try{c=new Function(j,n)}catch(d){e._throw({message:"[Compile Render]: "+d.message,line:"Javascript syntax occur error, it can not find out the error line.",syntax:e._table(f),template:b,shell:n}),c=m}return function(b){try{return c.apply(a,[b].concat(l))}catch(d){return d=k({},d,{source:e._table(a.$source,d.line)}),e._throw({message:"[Exec Render]: "+d.message,line:d.line,template:d.source,shell:e._table(d.shell,d.line)}),""}}}var b=arguments[0];void 0===b&&(b="");var d=arguments[1];void 0===d&&(d={}),b=c(b);var e=this,f=b,g=k({},this.DEFAULTS,d),i=g.depends,j=["$data"].concat(i).join(","),l=[];~h(i,function(a){"$"===a.charAt(0)?(a=a.replace("$",""),l.push(g[a])):l.push(void 0)}),!0!==g.noSyntax&&(b=this.$compileSyntax(b,!!g.strict));var n=this.$compileShell(b,g);return a({$source:f,$helpers:this._helpers||{},$blocks:this._blockHelpers||{}})}}()});require("fs");f.SOURCES={"<":"&lt;",">":"&gt;","&":"&amp;",'"':"&quot;","'":"&#x27;","/":"&#x2f;"},f.escapeFn=function(a){return f.SOURCES[a]},n("oTemplate",function(){return new o},a)}(this);
//# sourceMappingURL=oTemplate.lite.min.js.map